<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Razorpay Integration</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
    <button id="rzp-button">Pay Now</button>

    <script>
        // Replace with your Razorpay Key ID
        const razorpayKeyId = 'YOUR_RAZORPAY_KEY_ID';

        // Options for Razorpay
        const options = {
            key: razorpayKeyId,
            amount: 50000, // Amount in paise (e.g., 50000 paise = â‚¹500)
            currency: 'INR',
            name: 'Your Company Name',
            description: 'Test Transaction',
            image: 'https://your-company-logo-url.com/logo.png',
            order_id: '', // This will be generated by your backend
            handler: function (response) {
                alert('Payment successful! Payment ID: ' + response.razorpay_payment_id);
                // You can send the payment details to your backend for verification
                verifyPayment(response);
            },
            prefill: {
                name: 'John Doe',
                email: 'john.doe@example.com',
                contact: '9999999999'
            },
            notes: {
                address: 'Razorpay Corporate Office'
            },
            theme: {
                color: '#F37254'
            }
        };

        // Function to open Razorpay checkout
        const rzpButton = document.getElementById('rzp-button');
        rzpButton.onclick = function (e) {
            // Fetch the order ID from your backend
            fetch('/create-order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ amount: options.amount })
            })
            .then(response => response.json())
            .then(data => {
                options.order_id = data.order_id;
                const rzp = new Razorpay(options);
                rzp.open();
            })
            .catch(error => console.error('Error:', error));
        };

        // Function to verify payment on the backend
        function verifyPayment(paymentResponse) {
            fetch('/verify-payment', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(paymentResponse)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Payment verified successfully!');
                } else {
                    alert('Payment verification failed!');
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>